<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB RAG Architecture</title>
    <link rel="stylesheet" href="shared-theme.css">
    <style>
        body {
            overflow-x: hidden;
            min-height: 100vh;
        }

        .presentation-container {
            min-height: auto;
            display: block;
        }

        .slide {
            display: none;
            padding: var(--space-lg);
            position: relative;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
        }

        .slide-content {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: var(--space-xl);
            align-items: start;
            min-height: calc(100vh - 200px);
        }

        .text-content {
            background: var(--surface);
            padding: var(--space-xl);
            border-radius: var(--radius-lg);
            border-left: 4px solid var(--secondary-color);
            color: var(--text-primary);
            border: 1px solid var(--border);
            box-shadow: 0 4px 12px var(--shadow-md);
        }

        .slide h2 {
            font-size: var(--font-size-2xl);
            margin-bottom: var(--space-lg);
            color: var(--primary-color);
            font-weight: var(--font-weight-semibold);
        }

        .architecture-description {
            background: var(--background-soft);
            padding: var(--space-md);
            border-radius: var(--radius);
            margin-bottom: var(--space-lg);
            border-left: 3px solid var(--secondary-color);
        }

        .architecture-description h3 {
            color: var(--primary-color);
            font-size: var(--font-size-lg);
            margin-bottom: var(--space-sm);
            font-weight: var(--font-weight-semibold);
        }

        .architecture-description p {
            font-size: var(--font-size-sm);
            line-height: var(--line-height-normal);
            color: var(--text-secondary);
        }

        .benefits-list {
            list-style: none;
            margin: var(--space-lg) 0;
        }

        .benefits-list li {
            background: var(--background-soft);
            margin: var(--space-md) 0;
            padding: var(--space-md);
            border-radius: var(--radius);
            border-left: 3px solid var(--secondary-color);
            font-size: var(--font-size-sm);
            color: var(--text-primary);
            transform: translateX(-20px);
            opacity: 0;
            animation: slideInBenefit 0.6s ease-out forwards;
        }

        .benefits-list li:nth-child(1) { animation-delay: 0.2s; }
        .benefits-list li:nth-child(2) { animation-delay: 0.4s; }
        .benefits-list li:nth-child(3) { animation-delay: 0.6s; }
        .benefits-list li:nth-child(4) { animation-delay: 0.8s; }

        @keyframes slideInBenefit {
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .diagram-container {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            position: relative;
            overflow: visible;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            border: 1px solid var(--border);
            height: auto;
            box-shadow: 0 4px 12px var(--shadow-md);
        }

        .architecture-diagram {
            width: 100%;
            height: auto;
            object-fit: contain;
            border-radius: var(--radius-md);
            box-shadow: 0 4px 12px var(--shadow-md);
            max-width: 100%;
            cursor: pointer;
            transition: var(--transition);
        }

        .architecture-diagram:hover {
            box-shadow: 0 6px 20px var(--shadow-lg);
            opacity: 0.9;
        }

        .architecture-diagram:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px var(--shadow-lg);
        }

        .diagram-overlay {
            position: absolute;
            top: var(--space-md);
            right: var(--space-md);
            background: var(--primary-color);
            color: var(--text-inverse);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
        }

        .postgresql-comparison {
            background: rgba(255, 152, 0, 0.1);
            padding: var(--space-md);
            border-radius: var(--radius);
            margin-top: var(--space-lg);
            border-left: 3px solid var(--accent-orange);
        }

        .postgresql-comparison h4 {
            color: var(--accent-orange);
            font-size: var(--font-size-base);
            margin-bottom: var(--space-sm);
            font-weight: var(--font-weight-semibold);
        }

        .postgresql-comparison p {
            font-size: var(--font-size-sm);
            line-height: var(--line-height-normal);
            color: var(--text-secondary);
        }

        .mongodb-highlight {
            color: var(--primary-color);
            font-weight: var(--font-weight-semibold);
        }

        .slide-counter {
            display: none;
        }

        /* Zoom modal for diagrams */
        .zoom-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 30, 43, 0.95);
            backdrop-filter: blur(10px);
            z-index: 2000;
        }

        .zoom-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .zoom-modal img {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            border-radius: var(--radius-md);
        }

        .zoom-close {
            position: absolute;
            top: var(--space-2xl);
            right: var(--space-2xl);
            background: var(--secondary-color);
            border: none;
            color: var(--primary-color);
            font-size: var(--font-size-2xl);
            padding: var(--space-md) var(--space-lg);
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
        }

        .zoom-close:hover {
            background: var(--secondary-hover);
            transform: scale(1.1);
        }

        .fade-in {
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Scroll hint indicator */
        .scroll-hint {
            position: fixed;
            bottom: var(--space-2xl);
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: var(--space-sm);
            z-index: 100;
            animation: fadeInUp 2s ease-out 1s both;
        }

        .scroll-hint.hidden {
            opacity: 0 !important;
            pointer-events: none;
            visibility: hidden;
            transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }

        .scroll-arrow {
            background: var(--secondary-color);
            color: var(--primary-color);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xl);
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 12px var(--shadow-md);
            transition: var(--transition);
            animation: bounce 2s infinite;
        }

        .scroll-arrow:hover {
            background: var(--secondary-hover);
            transform: translateY(-2px) scale(1.1);
            box-shadow: 0 6px 20px var(--shadow-lg);
        }

        .scroll-text {
            background: var(--surface);
            color: var(--text-primary);
            padding: var(--space-sm) var(--space-md);
            border-radius: var(--radius-full);
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-medium);
            box-shadow: 0 2px 8px var(--shadow-sm);
            border: 1px solid var(--border);
            white-space: nowrap;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Responsive design */
        @media (max-width: 1200px) {
            .slide-content {
                grid-template-columns: 300px 1fr;
                gap: var(--space-lg);
            }
            
            .text-content {
                padding: var(--space-lg);
            }
        }

        @media (max-width: 900px) {
            .slide-content {
                grid-template-columns: 1fr;
                gap: var(--space-lg);
            }
            
            .text-content {
                max-height: 40vh;
                overflow-y: auto;
            }
        }
    </style>
</head>
<body>
    <header class="unified-header">
        <div class="header-content">
            <a href="playground.html" class="header-logo">
                <div class="logo-icon">M</div>
                <span>MongoDB Playground</span>
            </a>
            <div class="breadcrumb">
                <a href="playground.html">Playground</a>
                <span class="breadcrumb-separator">></span>
                <span>RAG Architecture</span>
            </div>
            <a href="playground.html" class="back-to-playground">← Back to Playground</a>
        </div>
    </header>

    <div class="page-container">

        <div class="presentation-container">
            <!-- RAG Slide -->
            <div class="slide active">
                <div class="slide-content">
                    <div class="text-content fade-in">
                        <h2>RAG (Retrieval-Augmented Generation)</h2>
                        <div class="architecture-description">
                            <h3>AI-Powered Search with <span class="mongodb-highlight">MongoDB Vector Search</span></h3>
                            <p>Combine retrieval-based and generative AI using MongoDB's native vector search capabilities for semantic similarity and context retrieval.</p>
                        </div>
                        <ul class="benefits-list">
                            <li><strong>Vector Search:</strong> Native vector indexing enables semantic search without additional infrastructure</li>
                            <li><strong>Unified Platform:</strong> Store vectors, metadata, and application data in one database</li>
                            <li><strong>Real-time Updates:</strong> Update knowledge base without retraining models</li>
                            <li><strong>Rich Filtering:</strong> Combine vector search with traditional MongoDB queries</li>
                        </ul>
                        <div class="postgresql-comparison">
                            <h4>PostgreSQL with pgvector Considerations:</h4>
                            <p>While pgvector provides a straightforward one-time setup for native vector search in PostgreSQL, there are architectural trade-offs to consider. The relational model requires complex joins for metadata filtering, and performance optimization at scale often needs careful index tuning. MongoDB's document model naturally handles unstructured content and metadata together, simplifying RAG application development.</p>
                        </div>
                    </div>
                    <div class="diagram-container">
                        <div class="diagram-overlay">Vector Search Flow</div>
                        <img src="assets/mongodb_rag.png" alt="MongoDB RAG Architecture" class="architecture-diagram" onclick="openZoom(this.src)">
                    </div>
                </div>
            </div>
        </div>

        <div class="slide-counter">
            RAG Architecture
        </div>
    </div>

    <!-- Scroll Hint -->
    <div class="scroll-hint" id="scrollHint">
        <div class="scroll-text">See PostgreSQL Comparison</div>
        <div class="scroll-arrow" onclick="scrollToComparison()" title="Scroll to see PostgreSQL comparison">↓</div>
    </div>

    <!-- Zoom Modal -->
    <div class="zoom-modal" id="zoomModal" onclick="closeZoom()">
        <button class="zoom-close" onclick="closeZoom()">×</button>
        <img id="zoomImage" src="" alt="Zoomed Architecture Diagram">
    </div>

    <script>
        function openZoom(imageSrc) {
            const modal = document.getElementById('zoomModal');
            const zoomImage = document.getElementById('zoomImage');
            zoomImage.src = imageSrc;
            modal.classList.add('active');
        }

        function closeZoom() {
            const modal = document.getElementById('zoomModal');
            modal.classList.remove('active');
        }

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeZoom();
            }
        });

        // Scroll to PostgreSQL comparison section
        function scrollToComparison() {
            const postgresSection = document.querySelector('.postgresql-comparison');
            if (postgresSection) {
                postgresSection.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
            }
        }

        // Hide scroll hint when user scrolls
        function handleScroll() {
            const scrollHint = document.getElementById('scrollHint');
            const postgresSection = document.querySelector('.postgresql-comparison');
            
            if (scrollHint) {
                // Check if user scrolled down significantly
                const hasScrolled = window.scrollY > 100;
                
                // Check if user is near the bottom of the page
                const isAtBottom = (window.innerHeight + window.scrollY) >= (document.documentElement.scrollHeight - 50);
                
                // Check if PostgreSQL section is FULLY visible (more than 50% in view)
                let postgresFullyVisible = false;
                if (postgresSection) {
                    const rect = postgresSection.getBoundingClientRect();
                    const sectionHeight = rect.height;
                    const visibleHeight = Math.max(0, Math.min(rect.bottom, window.innerHeight) - Math.max(rect.top, 0));
                    postgresFullyVisible = visibleHeight > sectionHeight * 0.5; // More than 50% visible
                }
                
                // Show hint only if PostgreSQL section is NOT fully visible AND user hasn't scrolled much
                if (hasScrolled || isAtBottom || postgresFullyVisible) {
                    scrollHint.classList.add('hidden');
                } else {
                    scrollHint.classList.remove('hidden');
                }
            }
        }

        // Initialize scroll hint behavior
        let scrollTimeout;
        window.addEventListener('scroll', () => {
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(handleScroll, 10); // Debounce for better performance
        });
        
        window.addEventListener('load', () => {
            // Check if PostgreSQL section is initially hidden
            setTimeout(() => {
                const scrollHint = document.getElementById('scrollHint');
                const postgresSection = document.querySelector('.postgresql-comparison');
                
                if (postgresSection && scrollHint) {
                    const rect = postgresSection.getBoundingClientRect();
                    const isInitiallyHidden = rect.top > window.innerHeight;
                    
                    if (isInitiallyHidden) {
                        // PostgreSQL section is below the fold, show hint
                        scrollHint.classList.remove('hidden');
                    } else {
                        // PostgreSQL section is already visible, no hint needed
                        scrollHint.classList.add('hidden');
                    }
                }
                
                handleScroll();
            }, 1000);
        });

        // Handle image load errors
        document.querySelectorAll('.architecture-diagram').forEach(img => {
            img.addEventListener('error', function() {
                this.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300"><rect width="400" height="300" fill="%23f0f0f0"/><text x="200" y="150" text-anchor="middle" fill="%23666">Diagram Loading...</text></svg>';
            });
        });
    </script>
</body>
</html>